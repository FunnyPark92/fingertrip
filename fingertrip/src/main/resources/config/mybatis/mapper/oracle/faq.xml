<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="config.mybatis.mapper.oracle.faq">
	<resultMap type="FaqVO" id="selResultMap">
		<id column="faqNo" jdbcType="BIGINT" property="faqNo"/>
		<result column="title" jdbcType="VARCHAR" property="title"/>
		<result column="content" jdbcType="VARCHAR" property="content"/>
		<result column="adminNo" jdbcType="BIGINT" property="adminNo"/>
		<result column="faqCategoryNo" jdbcType="BIGINT" property="faqCategoryNo"/>
	</resultMap>

	<select id="allFaqCategory" parameterType="int" resultType="map">
		<!-- SELECT f.faq_no, f.title, f.content, f.ADMIN_NO, f.FAQ_CATEGORY_NO, c.FAQ_CATE_TITLE, a.ID
		FROM faq f JOIN FAQ_CATEGORY c
		ON f.faq_category_no = c.faq_category_no
		join admin a on f.ADMIN_NO = a.ADMIN_NO		
		<if test="faq_category_no==0"> 
			where f.faq_category_no=#{faqCategoryNo}
		</if -->
		<choose>
			<when test="faqCategoryNo==1">
				SELECT f.faq_no, f.title, f.content, f.ADMIN_NO, f.FAQ_CATEGORY_NO, c.FAQ_CATE_TITLE, a.ID
				FROM faq f JOIN FAQ_CATEGORY c
				ON f.faq_category_no = c.faq_category_no
				join admin a on f.ADMIN_NO = a.ADMIN_NO
			</when>
			<otherwise>
				SELECT f.faq_no, f.title, f.content, f.ADMIN_NO, f.FAQ_CATEGORY_NO, c.FAQ_CATE_TITLE, a.ID
				FROM faq f JOIN FAQ_CATEGORY c
				ON f.faq_category_no = c.faq_category_no
				join admin a on f.ADMIN_NO = a.ADMIN_NO
				where f.faq_category_no=#{faqCategoryNo}
			</otherwise>			
		</choose> 
	</select>
	
	<select id="selectFaqCategory" parameterType="int" resultType="FaqVO">
		select * from faq
		where faq_category_no=#{faqCategoryNo}
	</select>
	
	
</mapper>